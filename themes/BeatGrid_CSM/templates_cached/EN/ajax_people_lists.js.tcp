<?php
return unserialize("a:5:{i:0;a:1:{i:0;a:1:{i:0;a:5:{i:0;s:33:\"tcpfunc_5abfd055397c36.03475711_1\";i:1;a:0:{}i:2;i:1;i:3;s:0:\"\";i:4;s:0:\"\";}}}i:1;a:0:{}i:2;s:17:\"ajax_people_lists\";i:3;N;i:4;a:1:{s:33:\"tcpfunc_5abfd055397c36.03475711_1\";s:9276:\"\$tpl_funcs['tcpfunc_5abfd055397c36.03475711_1']=\$KEEP_TPL_FUNCS['tcpfunc_5abfd055397c36.03475711_1']=recall_named_function('5abfd055397df9.54876660','\$parameters,\$cl',\"echo \\\"\\\\\\\"use strict\\\\\\\";\\\\n\\\\nif (typeof window.current_list_for=='undefined')\\\\n{\\\\n	window.current_list_for=null;\\\\n	window.currently_doing_list=null;\\\\n}\\\\n\\\\nfunction update_ajax_admin_search_list(target,e)\\\\n{\\\\n	update_ajax_member_list(target,'admin_search',false,e);\\\\n}\\\\n\\\\nfunction update_ajax_search_list(target,e,search_type)\\\\n{\\\\n	var special='search';\\\\n	if (typeof search_type!='undefined') special+='&search_type='+window.encodeURIComponent(search_type);\\\\n	update_ajax_member_list(target,special,false,e);\\\\n}\\\\n\\\\nfunction update_ajax_author_list(target,e)\\\\n{\\\\n	update_ajax_member_list(target,'author',false,e);\\\\n}\\\\n\\\\nfunction close_down()\\\\n{\\\\n	var current=document.getElementById('ajax_list');\\\\n	if (current) current.parentNode.removeChild(current);\\\\n}\\\\n\\\\nfunction update_ajax_member_list(target,special,delayed,e)\\\\n{\\\\n	if (typeof e=='undefined') e=window.event;\\\\n\\\\n	// Uncomment the below to disable backspace\\\\n	//if (!e) target.onkeyup=function (e2) { update_ajax_member_list(target,special,delayed,e2); } ; // Make sure we get the event next time\\\\n	//if ((e) && (e.keyCode==8)) return; // No back key allowed\\\\n\\\\n	if (e && enter_pressed(e)) return null;\\\\n\\\\n	if (target.disabled) return;\\\\n\\\\n	if (!browser_matches('ios'))\\\\n	{\\\\n		if (!target.onblur) target.onblur=function() { setTimeout(function() { close_down(); } ,300); }\\\\n	}\\\\n\\\\n	if (!delayed) // A delay, so as not to throw out too many requests\\\\n	{\\\\n		if (window.currently_doing_list)\\\\n		{\\\\n			window.clearTimeout(window.currently_doing_list);\\\\n			window.currently_doing_list=null;\\\\n		}\\\\n		var e_copy={ 'keyCode': e.keyCode, 'which': e.which };\\\\n		window.currently_doing_list=window.setTimeout(function() { update_ajax_member_list(target,special,true,e_copy); } ,400);\\\\n		return;\\\\n	} else\\\\n	{\\\\n		window.currently_doing_list=null;\\\\n	}\\\\n\\\\n	target.special=special;\\\\n\\\\n	var v=target.value;\\\\n\\\\n	window.current_list_for=target;\\\\n	var url='\\\",\\n	ecv_FIND_SCRIPT(\\\$cl,array(2),array(\\\"namelike\\\")),\\n	\\\"?id='+encodeURIComponent(v);\\\\n	if (special) url=url+'&special='+special;\\\\n\\\\n	if (typeof window.do_ajax_request!='undefined') do_ajax_request(url+keep_stub(),update_ajax_member_list_response);\\\\n}\\\\n\\\\nfunction update_ajax_member_list_response(result,list_contents)\\\\n{\\\\n	if (!list_contents) return;\\\\n	if (window.current_list_for==null) return;\\\\n\\\\n	close_down();\\\\n\\\\n	var data_list=false;//(typeof document.createElement('datalist').options!='undefined');	Still to buggy in browsers\\\\n\\\\n	//if (list_contents.childNodes.length==0) return;\\\\n	var list=document.createElement(data_list?'datalist':'select');\\\\n	list.className='people_list';\\\\n	list.setAttribute('id','ajax_list');\\\\n	if (data_list)\\\\n	{\\\\n		window.current_list_for.setAttribute('list','ajax_list');\\\\n	} else\\\\n	{\\\\n		if (list_contents.childNodes.length==1) // We need to make sure it is not a dropdown. Normally we'd use size (multiple isn't correct, but we'll try this for 1 as it may be more stable on some browsers with no side effects)\\\\n		{\\\\n			list.setAttribute('multiple','multiple');\\\\n		} else\\\\n		{\\\\n			list.setAttribute('size',list_contents.childNodes.length+1);\\\\n		}\\\\n		list.style.position='absolute';\\\\n		list.style.left=(find_pos_x(window.current_list_for))+'px';\\\\n		list.style.top=(find_pos_y(window.current_list_for)+find_height(window.current_list_for))+'px';\\\\n	}\\\\n	setTimeout(function() { list.style.zIndex++; } ,100); // Fixes Opera by causing a refresh\\\\n\\\\n	if (list_contents.childNodes.length==0) return;\\\\n\\\\n	var i,item,displaytext;\\\\n	for (i=0;i<list_contents.childNodes.length;i++)\\\\n	{\\\\n		item=document.createElement('option');\\\\n		item.value=list_contents.childNodes[i].getAttribute('value');\\\\n		displaytext=item.value;\\\\n		if (list_contents.childNodes[i].getAttribute('displayname')!='')\\\\n			displaytext=list_contents.childNodes[i].getAttribute('displayname');\\\\n		item.text=displaytext;\\\\n		item.innerText=displaytext;\\\\n		list.appendChild(item);\\\\n	}\\\\n	item=document.createElement('option');\\\\n	item.disabled=true;\\\\n	item.text='\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"javascript:SUGGESTIONS_ONLY\\\",array()),\\n	\\\"'.toUpperCase();\\\\n	item.innerText='\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"javascript:SUGGESTIONS_ONLY\\\",array()),\\n	\\\"'.toUpperCase();\\\\n	list.appendChild(item);\\\\n	window.current_list_for.parentNode.appendChild(list);\\\\n\\\\n	if (data_list) return;\\\\n\\\\n	if (typeof window.fade_transition!='undefined')\\\\n	{\\\\n		set_opacity(list,0.0);\\\\n		fade_transition(list,100,30,8);\\\\n	}\\\\n\\\\n	var current_list_for_copy=window.current_list_for;\\\\n\\\\n	if (typeof window.current_list_for.old_onkeyup=='undefined')\\\\n		window.current_list_for.old_onkeyup=window.current_list_for.onkeyup;\\\\n	if (typeof window.current_list_for.old_onchange=='undefined')\\\\n		window.current_list_for.old_onchange=window.current_list_for.onchange;\\\\n\\\\n	var make_selection=function(e)\\\\n	{\\\\n		if (typeof e=='undefined') e=window.event;\\\\n		var el=e.target;\\\\n		if (!el) el=e.srcElement;\\\\n		current_list_for_copy.value=el.value;\\\\n		current_list_for_copy.onkeyup=current_list_for_copy.old_onkeyup;\\\\n		current_list_for_copy.onchange=current_list_for_copy.old_onchange;\\\\n		current_list_for_copy.onkeypress=function() {};\\\\n		if (typeof current_list_for_copy.onrealchange!='undefined' && current_list_for_copy.onrealchange) current_list_for_copy.onrealchange(e);\\\\n		if (typeof current_list_for_copy.onchange!='undefined' && current_list_for_copy.onchange) current_list_for_copy.onchange(e);\\\\n		var al=document.getElementById('ajax_list');\\\\n		al.parentNode.removeChild(al);\\\\n		window.setTimeout(function() {\\\\n			current_list_for_copy.focus();\\\\n		}, 300);\\\\n	};\\\\n\\\\n	window.current_list_for.down_once=false;\\\\n	var handle_arrow_usage=function(event) {\\\\n		if (typeof event=='undefined') event=window.event;\\\\n		if (!event.shiftKey && key_pressed(event,40,true)) // DOWN\\\\n		{\\\\n			current_list_for_copy.disabled=true;\\\\n			window.setTimeout(function() { current_list_for_copy.disabled=false; }, 1000);\\\\n\\\\n			var temp=current_list_for_copy.onblur;\\\\n			current_list_for_copy.onblur=function() {};\\\\n			list.focus();\\\\n			current_list_for_copy.onblur=temp;\\\\n			if (!current_list_for_copy.down_once)\\\\n			{\\\\n				current_list_for_copy.down_once=true;\\\\n				list.selectedIndex=0;\\\\n			} else\\\\n			{\\\\n				if (list.selectedIndex<list.options.length-1) list.selectedIndex++;\\\\n			}\\\\n			list.options[list.selectedIndex].selected=true;\\\\n			return cancel_bubbling(event);\\\\n		}\\\\n		if (!event.shiftKey && key_pressed(event,38,true)) // UP\\\\n		{\\\\n			current_list_for_copy.disabled=true;\\\\n			window.setTimeout(function() { current_list_for_copy.disabled=false; }, 1000);\\\\n\\\\n			var temp=current_list_for_copy.onblur;\\\\n			current_list_for_copy.onblur=function() {};\\\\n			list.focus();\\\\n			current_list_for_copy.onblur=temp;\\\\n			if (!current_list_for_copy.down_once)\\\\n			{\\\\n				current_list_for_copy.down_once=true;\\\\n				list.selectedIndex=0;\\\\n			} else\\\\n			{\\\\n				if (list.selectedIndex>0) list.selectedIndex--;\\\\n			}\\\\n			list.options[list.selectedIndex].selected=true;\\\\n			return cancel_bubbling(event);\\\\n		}\\\\n		return null;\\\\n	};\\\\n	window.current_list_for.onkeyup=function(event)\\\\n	{\\\\n		if (typeof event=='undefined') event=window.event;\\\\n		var ret=handle_arrow_usage(event);\\\\n		if (ret!=null) return ret;\\\\n		return update_ajax_member_list(current_list_for_copy,current_list_for_copy.special,false,event);\\\\n	};\\\\n	window.current_list_for.onchange=function(event)\\\\n	{\\\\n		current_list_for_copy.onkeyup=current_list_for_copy.old_onkeyup;\\\\n		current_list_for_copy.onchange=current_list_for_copy.old_onchange;\\\\n		if (current_list_for_copy.onchange) current_list_for_copy.onchange(event);\\\\n	};\\\\n	list.onkeyup=function(event)\\\\n	{\\\\n		if (typeof event=='undefined') event=window.event;\\\\n\\\\n		var ret=handle_arrow_usage(event);\\\\n		if (ret!=null) return ret;\\\\n		if (enter_pressed(event)) // ENTER\\\\n		{\\\\n			make_selection(event);\\\\n			current_list_for_copy.disabled=true;\\\\n			window.setTimeout(function() { current_list_for_copy.disabled=false; }, 200);\\\\n\\\\n			return cancel_bubbling(event);\\\\n		}\\\\n		if (!event.shiftKey && key_pressed(event,[40,38],true))\\\\n		{\\\\n			if (typeof event.preventDefault!='undefined') event.preventDefault();\\\\n			return cancel_bubbling(event);\\\\n		}\\\\n		return null;\\\\n	};\\\\n	window.current_list_for.onkeypress=function(event)\\\\n	{\\\\n		if (typeof event=='undefined') event=window.event;\\\\n\\\\n		if (!event.shiftKey && key_pressed(event,[40,38],true))\\\\n		{\\\\n			if (typeof event.preventDefault!='undefined') event.preventDefault();\\\\n			return cancel_bubbling(event);\\\\n		}\\\\n		return null;\\\\n	};\\\\n	list.onkeypress=function(event)\\\\n	{\\\\n		if (typeof event=='undefined') event=window.event;\\\\n\\\\n		if (!event.shiftKey && key_pressed(event,[40,38,13],true))\\\\n		{\\\\n			if (typeof event.preventDefault!='undefined') event.preventDefault();\\\\n			return cancel_bubbling(event);\\\\n		}\\\\n		return null;\\\\n	};\\\\n\\\\n	add_event_listener_abstract(list,browser_matches('ios')?'change':'click',make_selection,false);\\\\n\\\\n	window.current_list_for=null;\\\\n}\\\\n\\\\n\\\";\");\";}}");

